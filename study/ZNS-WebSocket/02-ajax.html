<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<input type="button" id="btn1" value="按钮">
		<script>
			
			let oBtn = document.getElementById('btn1')
			
			oBtn.onclick = function () {
				// 1 创建对象
				let xhr = new XMLHttpRequest()
				// 2 连接 true/false 异步/同步
				xhr.open('GET', './data/1.txt', true)
				// 3 发送  send里面的数据 就是body数据(POST)
				xhr.send()
				// 4 接收
				xhr.onreadystatechange = function () {
					// alert('onreadystatechange') // 3次 其实一共有5次 有两次看不见
					// alert(xhr.readyState)
					if (xhr.readyState == 4) {
						// alert('完成')
						// alert(xhr.status)
						if (
							(xhr.status >= 200 && xhr.status < 300) || xhr.status == 304
						) {
							console.log(xhr)
							alert('success')
						} else {
							alert('error')
						}
						
						// let json = null
						// try {
						// 	json = JSON.parse(xhr.responseText)
						// } catch(e) {
						// 	json = eval('('+ xhr.responseText +')')
						// }
						
					}
				}
			}
			
			
		</script>
	</body>
</html>
